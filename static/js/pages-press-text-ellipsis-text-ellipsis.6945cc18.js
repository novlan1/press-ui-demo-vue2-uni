(self["webpackChunkpress_ui_demo_vue2"]=self["webpackChunkpress_ui_demo_vue2"]||[]).push([[9335],{11828:function(e,t,n){var r=n(94423);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var i=n(75970).A;i("0369a1c6",r,!0,{sourceMap:!1,shadowMode:!1})},82854:function(e,t,n){"use strict";var r;n.r(t),n.d(t,{default:function(){return k}});var i,s,a,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo-wrap"},[n("demo-block",{attrs:{title:e.t("basicUsage")}},[n("PressTextEllipsis",{attrs:{content:e.t("text")}})],1),n("demo-block",{attrs:{title:e.t("expandCollapse"),"header-style":e.headerStyle}},[n("PressTextEllipsis",{attrs:{"adjust-string":"aa",content:e.t("text2"),"expand-text":e.t("expandText"),"collapse-text":e.t("collapseText")}})],1),n("demo-block",{attrs:{title:e.t("customRows"),"header-style":e.headerStyle}},[n("PressTextEllipsis",{attrs:{rows:"3",content:e.t("text3"),"expand-text":e.t("expandText"),"collapse-text":e.t("collapseText"),"adjust-string":"aaaa"}})],1),n("demo-block",{attrs:{title:e.t("collapseStart"),"header-style":e.headerStyle}},[n("PressTextEllipsis",{attrs:{rows:"1","adjust-string":"aa",content:e.t("text3"),"expand-text":e.t("expandText"),"collapse-text":e.t("collapseText"),position:"start"}})],1),n("demo-block",{attrs:{title:e.t("collapseMiddle"),"header-style":e.headerStyle}},[n("PressTextEllipsis",{attrs:{rows:"2",content:e.t("text3"),"adjust-string":"aa","expand-text":e.t("expandText"),"collapse-text":e.t("collapseText"),position:"middle"}})],1),n("demo-block",{attrs:{title:e.t("customAction"),"header-style":e.headerStyle}},[n("PressTextEllipsis",{attrs:{content:e.t("text"),"use-action-slot":!0},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.expanded;return[e._v(e._s(n?e.t("collapseText"):e.t("expandText")))]}}])})],1)],1)},l=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"root",staticClass:"press-text-ellipsis"},[e._v(e._s(e.expanded?e.content:e.text)),e.hasAction?n("span",{ref:"actionRef",staticClass:"press-text-ellipsis__action",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClickAction.apply(void 0,arguments)}}},[e._t("action",[e._v(e._s(e.actionText))],{expanded:e.expanded})],2):e._e()])},u=[],d=n(30907),p=(n(97199),n(86810),n(11680),n(98127),n(59803),n(74861),n(13740),n(32033),n(6344),n(7072)),h=n(98408)["A"],f=0,x={name:"PressTextEllipsis",props:{rows:{type:[Number,String],default:1},dots:{type:String,default:"..."},content:{type:String,default:""},expandText:{type:String,default:""},collapseText:{type:String,default:""},position:{type:String,default:"end"},useActionSlot:{type:Boolean,default:!1},adjustString:{type:[Object,String],default:function(){return{end:"a",start:"a",middle:"aa"}}}},data:function(){return{text:this.content,expanded:!1,hasAction:!1,needRecalculate:!1,hideText:this.content,id:"hideDom-0"}},computed:{innerAdjustString:function(){return"string"===typeof this.adjustString?this.adjustString:this.adjustString[this.position]},hideStyle:function(){return(0,p.Ay)({position:"fixed",zIndex:"-9999",top:"-9999px",height:"auto",minHeight:"auto",maxHeight:"auto"})},actionText:function(){return this.expanded?this.collapseText:this.expandText}},watch:{content:{handler:function(e){this.calcEllipsised(),this.hideText=e}},rows:"calcEllipsised",position:"calcEllipsised"},mounted:function(){var e=this;this.calcEllipsised(),f+=1,this.id="hideDom-".concat(f),this.useActionSlot&&setTimeout((function(){e.calcEllipsised()})),window.addEventListener("resize",this.watchResize,{passive:!0}),window.addEventListener("orientationchange",this.watchResize,{passive:!0})},activated:function(){this.needRecalculate&&(this.needRecalculate=!1,this.calcEllipsised())},beforeDestroy:function(){this.onBeforeUnMount()},beforeUnmount:function(){this.onBeforeUnMount()},methods:{onBeforeUnMount:function(){window.removeEventListener("resize",this.watchResize),window.removeEventListener("orientationchange",this.watchResize)},watchResize:function(){this.calcEllipsised()},pxToNum:function(e){if(!e)return 0;var t="".concat(e).match(/^\d*(\.\d*)?/);return t?Number(t[0]):0},updateContainer:function(e,t,n){e[t]=n},getContainerHeight:function(e){var t;return t=Promise.resolve({offsetHeight:e.offsetHeight,paddingTop:e.style.paddingBottom,paddingBottom:e.style.paddingTop,lineHeight:e.style.lineHeight}),t},cloneContainer:function(){if(this.$refs.root&&this.$refs.root.isConnected){var e=window.getComputedStyle(this.$refs.root),t=document.createElement("div"),n=Array.prototype.slice.apply(e);return n.forEach((function(n){t.style.setProperty(n,e.getPropertyValue(n))})),t.style.position="fixed",t.style.zIndex="-9999",t.style.top="-9999px",t.style.height="auto",t.style.minHeight="auto",t.style.maxHeight="auto",t.innerText=this.content,document.body.appendChild(t),t}},calcEllipsisText:function(e,t){var n=this;return(0,d.A)(regeneratorRuntime.mark((function r(){var i,s,a,o,l,c,u,p,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=n.content,s=n.position,a=n.dots,o=i.length,l=0+o>>1,c=function(){var e,t;return n.useActionSlot?null==(null===(e=n.$refs.actionRef)||void 0===e?void 0:e.outerHTML)?"":null===(t=n.$refs.actionRef)||void 0===t?void 0:t.outerHTML:n.expandText},u=c(),p=function(){var r=(0,d.A)(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return l=function(){var r=(0,d.A)(regeneratorRuntime.mark((function r(c,d){var p,h,f,x,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(d-c<=1)){r.next=4;break}if("end"!==s){r.next=3;break}return r.abrupt("return",i.slice(0,c)+a);case 3:return r.abrupt("return",a+i.slice(d,o));case 4:return p=Math.round((c+d)/2),h="",h="end"===s?i.slice(0,p)+a:a+i.slice(p,o),n.updateContainer(e,"innerText",h),f=h+n.innerAdjustString,f=e.innerHTML+u,n.updateContainer(e,"innerHTML",f),r.next=13,n.getContainerHeight(e);case 13:if(x=r.sent,g=x.offsetHeight,!(g>t)){r.next=23;break}if("end"!==s){r.next=20;break}return r.next=19,l(c,p);case 19:return r.abrupt("return",r.sent);case 20:return r.next=22,l(p,d);case 22:return r.abrupt("return",r.sent);case 23:if("end"!==s){r.next=27;break}return r.next=26,l(p,d);case 26:return r.abrupt("return",r.sent);case 27:return r.next=29,l(c,p);case 29:return r.abrupt("return",r.sent);case 30:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),r.next=3,l(0,o);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),h=function(){var r=(0,d.A)(regeneratorRuntime.mark((function r(s,l){var c,d,p,f,x,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(s[1]-s[0]<=1&&l[1]-l[0]<=1)){r.next=2;break}return r.abrupt("return",i.slice(0,s[0])+a+i.slice(l[1],o));case 2:return c=Math.floor((s[0]+s[1])/2),d=Math.ceil((l[0]+l[1])/2),p=n.content.slice(0,c)+n.dots+n.content.slice(d,o),n.updateContainer(e,"innerText",p),f=p+n.innerAdjustString,f=e.innerHTML+u,n.updateContainer(e,"innerHTML",f),r.next=11,n.getContainerHeight(e);case 11:if(x=r.sent,g=x.offsetHeight,!(g>=t)){r.next=17;break}return r.next=16,h([s[0],c],[d,l[1]]);case 16:return r.abrupt("return",r.sent);case 17:return r.next=19,h([c,s[1]],[l[0],d]);case 19:return r.abrupt("return",r.sent);case 20:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),"middle"!==n.position){r.next=13;break}return r.next=10,h([0,l],[l,o]);case 10:r.t0=r.sent,r.next=16;break;case 13:return r.next=15,p();case 15:r.t0=r.sent;case 16:return r.abrupt("return",r.t0);case 17:case"end":return r.stop()}}),r)})))()},calcEllipsised:function(){var e=this;return(0,d.A)(regeneratorRuntime.mark((function t(){var n,r,i,s,a,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={offsetHeight:0,innerHTML:"",innerText:""},n=e.cloneContainer(),n){t.next=5;break}return e.needRecalculate=!0,t.abrupt("return");case 5:return t.next=7,e.getContainerHeight(n);case 7:if(r=t.sent,i=r.paddingBottom,s=r.paddingTop,a=r.lineHeight,o=r.offsetHeight,l=Math.ceil((Number(e.rows)+.5)*e.pxToNum(a)+e.pxToNum(s)+e.pxToNum(i)),!(l<o)){t.next=17;break}return e.hasAction=!0,t.next=14,e.calcEllipsisText(n,l);case 14:e.text=t.sent,t.next=19;break;case 17:e.hasAction=!1,e.text=e.content;case 19:document.body.removeChild(n);case 20:case"end":return t.stop()}}),t)})))()},toggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.expanded;this.expanded=e},onClickAction:function(e){this.toggle(),this.$emit("clickAction",e)},getHideDom:function(){var e=this;return new Promise((function(t){uni.createSelectorQuery().in(e).select("#".concat(e.id)).fields({size:!0,computedStyle:["lineHeight","paddingBottom","paddingTop"]},(function(e){h.log("res",e),t(e)})).exec()}))},updateHideText:function(e){this.hideText=e}}},g=x,m=(n(11828),n(81904)),y=(0,m.A)(g,c,u,!1,null,"767ddf3c",null,!1,i,s),v=y.exports,w={i18n:{"zh-CN":{text:"慢慢来，不要急，生活给你出了难题，可也终有一天会给出答案。",text2:"似水流年是一个人所有的一切，只有这个东西，才真正归你所有。其余的一切，都是片刻的欢娱和不幸，转眼间就已跑到那似水流年里去了。",text3:"那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样。可是我过二十一岁生日时没有预见到这一点。我觉得自己会永远生猛下去，什么也锤不了我。",expandText:"展开",collapseText:"收起",expandCollapse:"展开/收起",customRows:"自定义展示行数",collapsePosition:"自定义省略位置",collapseStart:"头部省略",collapseMiddle:"中部省略",customAction:"自定义操作内容"},"en-US":{text:"Take your time and be patient. Life itself will eventually answer all those questions it once raised for you.",text2:"The fleeting time of one's life is everything that belongs to a person. Only this thing truly belongs to you. Everything else is just a momentary pleasure or misfortune, which will soon be gone with the passing of time.",text3:"That day, I turned twenty-one. In the golden age of my life, I was full of dreams. I wanted to love, to eat, and to instantly transform into one of these clouds, part alight, part darkened. It was only later that I understood life is but a slow, drawn-out process of getting your balls crushed. Day by day, you get older. Day by day, your dreams fade. In the end you are no different from a crushed ox. But I hadn't foreseen any of it on my twenty-first birthday. I thought I would be vigorous forever, and that nothing could ever crush me.",expandText:"expand",collapseText:"collapse",expandCollapse:"Expand/Collapse",customRows:"Customize Rows",collapsePosition:"Custom Collapse Position",collapseStart:"Head Area Collapse Position",collapseMiddle:"Middle Area Collapse Position",customAction:"Custom Action"}},components:{PressTextEllipsis:v},data:function(){return{headerStyle:"margin-top: 10px;"}},computed:{},mounted:function(){},methods:{}},T=w,b=(0,m.A)(T,o,l,!1,null,"4c0e6062",null,!1,r,a),k=b.exports},94423:function(e,t,n){"use strict";n.r(t);var r=n(10809),i=n.n(r),s=n(34114),a=n.n(s),o=a()(i());o.push([e.id,".press-text-ellipsis[data-v-767ddf3c]{line-height:var(--press-text-ellipsis-line-height,1.6);white-space:pre-wrap;overflow-wrap:break-word}.press-text-ellipsis__action[data-v-767ddf3c]{cursor:pointer;color:var(--press-text-ellipsis-action-color,var(--press-blue,#1989fa))}.press-text-ellipsis__action[data-v-767ddf3c]:active{opacity:var(--press-active-opacity)}",""]),t["default"]=o}}]);