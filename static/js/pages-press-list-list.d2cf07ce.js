(self["webpackChunkpress_ui_demo_vue2"]=self["webpackChunkpress_ui_demo_vue2"]||[]).push([[2733],{3612:function(t,e,l){var i=l(63673);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var n=l(75970).A;n("c47d47fe",i,!0,{sourceMap:!1,shadowMode:!1})},26863:function(t,e,l){var i=l(20722);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var n=l(75970).A;n("004aacb6",i,!0,{sourceMap:!1,shadowMode:!1})},85416:function(t,e,l){"use strict";var i;l.r(e),l.d(e,{default:function(){return X}});var n,a,o=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"demo-wrap demo-wrap--gray demo-wrap--flex",class:t.listLocal.vertical?"":"demo-wrap--hor"},[l("demo-block",{attrs:{title:t.t("basicUsage"),"section-style":t.sectionStyle,"header-style":t.headerStyle}},[l("PressCell",{attrs:{title:t.t("custom"),"is-link":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onShowBasicPopupCell.apply(void 0,arguments)}}})],1),l("div",{staticClass:"demo-container"},[l("PressList",{attrs:{finished:t.finished,"immediate-check":t.immediateCheck,vertical:t.listLocal.vertical,"finished-text":"没有更多了","auto-check-scroller":t.listLocal.autoCheckScroller,"custom-style":t.listStyle},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.load.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[l("div",{staticClass:"list__wrap",style:t.wrapStyle},[l("div",{style:t.hiddenUpPartStyle}),t._l(t.showingData,(function(e){return l("div",{key:e.value,staticClass:"list__item"},[t._v(t._s(e.label))])}))],2)])],1),l("PressPopupCell",{ref:t.FUNCTIONAL_ID_MAP.POPUP_CELL,attrs:{id:t.FUNCTIONAL_ID_MAP.POPUP_CELL,mode:"functional"}}),l("PressPickerPlus",{ref:t.FUNCTIONAL_ID_MAP.PICKER,attrs:{id:t.FUNCTIONAL_ID_MAP.PICKER,mode:"functional"}})],1)},s=[],c=l(10819),r=l(20731),u=(l(174),l(17350),l(15186),l(86810),l(98127),l(824),l(55026),l(1582)),h=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("v-uni-scroll-view",{class:t.scrollViewClass,style:t.scrollViewStyle,attrs:{id:t.SCROLL_VIEW_ID,"scroll-y":t.vertical,"scroll-x":!t.vertical,"scroll-with-animation":t.scrollWithAnimation,"scroll-anchoring":t.scrollAnchoring,enhanced:t.enhanced,"enable-flex":t.enableFlex,"enable-passive":t.enablePassive,"lower-threshold":t.offset,"scroll-into-view":t.scrollToElementById,"scroll-top":t.scrollTop,"scroll-left":t.scrollLeft},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.scrollToLower.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[l("div",{staticClass:"press-list__layout",style:t.layoutStyle},[t._t("default"),t.innerLoading?t._t("loading",[l("div",{staticClass:"press-list__loading",style:t.loadingStyle},[l("PressLoading",{attrs:{vertical:!t.vertical,size:t.loadingSize}},[t._v(t._s(t.loadingText))])],1)]):t._e(),t.finishedText&&t.finished?t._t("finished",[l("div",{staticClass:"press-list__finished",style:t.finishedStyle},[l("div",[t._v(t._s(t.finishedText))])])]):t._e(),l("div",{staticClass:"press-list__placeholder"})],2)])},d=[],f=(l(11680),l(56389),l(36053)),p=l(3523),v=l(50180),g=l(41729),m=l(54443),y=l(28937),_=l(76288),S=l(92882),C=l(84879),x="scrollViewId",L=(0,v.JP)(x),b={name:"PressList",options:(0,r.A)({},f.KQ),components:{PressLoading:C.A},mixins:[y.VP,(0,_.x)((function(t){this.autoCheckScroller&&(this.scroller||(this.scroller=(0,v.Rm)(this.$el)),t(this.scroller,"scroll",this.onScroll,!0),t(this.scroller,"touchmove",this.onScroll,!0),this.onScroll())})),S.G],props:(0,r.A)((0,r.A)({offset:{type:[Number,String],default:50},finished:{type:Boolean,default:!1},finishedText:{type:String,default:""},loadingText:{type:String,default:"加载中..."},immediateCheck:{type:Boolean,default:!0},layoutStyle:{type:String,default:""},enableFlex:{type:Boolean,default:!1},enhanced:{type:Boolean,default:!1},scrollWithAnimation:{type:Boolean,default:!1},enablePassive:{type:Boolean,default:!1},scrollAnchoring:{type:Boolean,default:!1},scrollToElementById:{type:String,default:""},vertical:{type:Boolean,default:!0},loadingStyle:{type:String,default:""},loadingSize:{type:String,default:"20px"},finishedStyle:{type:String,default:""},autoCheckScroller:{type:Boolean,default:!1},scrollLeft:{type:[Number,String],default:0},scrollTop:{type:[Number,String],default:0}},f.Gs),{},{customStyle:{type:[String,Object],default:""}}),emits:["scroll","input","load","update:modelValue"],data:function(){return{innerLoading:this.realModelValue,SCROLL_VIEW_ID:x,scrollerHeight:0}},computed:{scrollViewClass:function(){return["press-list",this.vertical?"press-list--vertical":"press-list--hor",this.customClass].join(" ")},scrollViewStyle:function(){return(0,g.iF)([{height:"100%"},this.customStyle])}},watch:{realModelValue:{handler:function(t){this.innerLoading=t,this.check()}},finished:"check"},mounted:function(){this.immediateCheck&&this.check()},updated:function(){},methods:{getScrollerHeight:function(){var t=this;this.scrollerHeight||(0,p.l)(this,L).then((function(e){t.scrollerHeight=e.height}))},scroll:function(t){this.getScrollerHeight(),this.$emit("scroll",t,this.scrollerHeight),this.check()},scrollToLower:function(){this.emitInput()},emitInput:function(){this.innerLoading||this.finished||(this.innerLoading=!0,this.emitModelValue(!0),this.$emit("load"))},check:function(){var t=this;(0,m.dY)((function(){t.innerCheck()}))},innerCheck:function(){this.autoCheckScroller||this.commonCheck()},commonCheck:function(t){var e=this,l=this.offset;this.innerLoading||this.finished||Promise.all([(0,p.l)(this,".press-list__placeholder"),(0,p.l)(this,L)]).then((function(i){var n=i[0],a=i[1];if(void 0===t&&(t=a),!e.innerLoading&&!e.finished){var o=t.bottom-t.top;if(o){var s=n.bottom-t.bottom;e.vertical||(s=n.right-t.right);var c=s<=l;c&&e.emitInput()}}})).catch((function(){})).finally((function(){}))},onScroll:function(){var t,e=this.scroller,l=this.autoCheckScroller;l&&(null!==e&&void 0!==e&&e.getBoundingClientRect&&(t=e.getBoundingClientRect()),this.commonCheck(t))}}},k=b,A=(l(26863),l(81904)),P=(0,A.A)(k,h,d,!1,null,"646ab1a6",null,!1,n,a),w=P.exports,D=l(4896),I=l(24560),T=(l(16206),l(35868),l(13740),l(24540),l(55080)),M={pageSize:20,total:300,delay:200,vertical:!0,autoCheckScroller:!0},z=Array.from({length:5}).map((function(t,e){return Math.pow(10,e)})).reduce((function(t,e){for(var l=1;l<10;l++)t.push(e*l);return t}),[]).map((function(t){return{label:t,value:t}})),V=z.reduce((function(t,e){return t[e.value]=e.label,t}),{}),B=Array.from({length:1e3}).map((function(t,e){return{label:"".concat(100*(e+1),"ms"),value:100*(e+1)}})),E=B.reduce((function(t,e){return t[e.value]=e.label,t}),{});function N(t){var e=t.context,l=t.callback;(0,T.Rc)({context:e,title:"自定义设置",closeIcon:!0,cellList:[{label:"每次加载数量",value:V[M.pageSize],click:function(t){var i=t.context;i.closeDialog(),(0,T.u1)({title:"每次加载数量",closeIcon:!0,list:z,current:{value:M.pageSize},context:e}).then((function(t){var i=t.item;M.pageSize=i.value,e.onGTip("设置成功"),"function"===typeof l.changePageSize&&l.changePageSize.call(e,i.value)})).catch((function(){}))}},{label:"列表总数",value:V[M.total],click:function(t){var i=t.context;i.closeDialog(),(0,T.u1)({title:"列表总数",closeIcon:!0,list:z,current:{value:M.total},context:e}).then((function(t){var i=t.item;M.total=i.value,e.onGTip("设置成功"),"function"===typeof l.changeTotal&&l.changeTotal.call(e,i.value)})).catch((function(){}))}},{label:"数据请求时间",value:E[M.delay],click:function(t){var i=t.context;i.closeDialog(),(0,T.u1)({title:"数据请求时间",closeIcon:!0,list:B,current:{value:M.delay},context:e}).then((function(t){var i=t.item;M.delay=i.value,e.onGTip("设置成功"),"function"===typeof l.changeDelay&&l.changeDelay.call(e,i.value)})).catch((function(){}))}},{label:"是否竖向滚动",type:"switch",open:M.vertical,click:function(t){var i=t.context;i.closeDialog(),M.vertical=!M.vertical,e.onGTip("设置成功"),"function"===typeof l.changeDirection&&l.changeDirection.call(e,M.vertical)}},{label:"自动检测 Scroller",type:"switch",open:M.autoCheckScroller,click:function(t){var i=t.context;i.closeDialog(),M.autoCheckScroller=!M.autoCheckScroller,"function"===typeof l.changeAutoCheckScroller&&l.changeAutoCheckScroller.call(e,M.autoCheckScroller)}}]})}l(83805);var U=!1;try{var F={};Object.defineProperty(F,"passive",{get:function(){return U=!0,!0}}),window.addEventListener("test-passive",(function(){}),F)}catch(Z){}var O=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!!U&&{passive:t}},$=(O(),l(62676));l(93222);function H(t){var e,l,i;return(0,$.n1)()?{value:(null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.value)||"",scrollTop:null===t||void 0===t||null===(l=t.target)||void 0===l?void 0:l.scrollTop,scrollHeight:null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.scrollHeight}:t.detail}var R=50,G=500,j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G;return{data:function(){return{currentIndex:0,useVirtualList:!0}},computed:{upMissed:function(){var e=this.currentIndex;return Math.max(0,e-t)},showingData:function(){var e=this.currentIndex,l=this.upMissed,i=this.list,n=this.useVirtualList;return n?i.slice(l,e+t).map((function(t,e){return(0,r.A)((0,r.A)({},t),{},{uniqueKey:e+l})})):i},hiddenUpPartStyle:function(){var t=this.upMissed,e=this.useVirtualList;if(!e)return"";var l="height: ".concat(t*R,"px;");return l},wrapStyle:function(){var t=this.list,e=this.useVirtualList;return e?"height: ".concat(t.length*R,"px;"):""}},methods:{updateCurrentIndex:function(t,e){var l=H(t),i=l.scrollTop,n=l.scrollHeight;if(!(i<0)&&!(e+i>n)){var a=Math.round(i/R);this.currentIndex=a}}}}},K=l(98408)["A"];function W(t){var e=t.length,l=t.delay,i=t.beforeLength;return new Promise((function(t){setTimeout((function(){t({data:Array.from({length:e}).map((function(t,e){var l=e+i+1;return l<10&&(l="0".concat(l)),{label:l,value:l}}))})}),l||0)}))}var q,J={i18n:{"zh-CN":{custom:"自定义"},"en-US":{custom:"Custom"}},components:{PressList:w,PressPopupCell:I.A,PressPickerPlus:D.A,PressCell:u.A},mixins:[j()],data:function(){var t=(0,r.A)({},M),e="";return{sectionStyle:"margin: 0;background: #f7f8fa;",headerStyle:"background: #f7f8fa;",loading:!1,finished:!1,immediateCheck:!0,list:[],FUNCTIONAL_ID_MAP:T.nB,listLocal:t,listStyle:e}},computed:{},watch:{listLocal:{handler:function(t){t.vertical||(this.useVirtualList=!1)},deep:!0}},mounted:function(){},methods:{load:function(){K.log("[load]"),this.onFetchData()},scroll:function(t,e){this.updateCurrentIndex(t,e)},onFetchData:function(t){var e,l=this,i=this.listLocal,n=i.total,a=i.pageSize,o=i.delay;W({delay:o,length:a,beforeLength:t?0:(null===(e=this.list)||void 0===e?void 0:e.length)||0}).then((function(e){var i=e.data,a=t?i:[].concat((0,c.A)(l.list),(0,c.A)(i));a.length>n&&(a=a.slice(0,n)),l.list=a,K.log("[current total]",a.length),l.loading=!1,l.finished=l.list.length>=n})).catch((function(){}))},onShowBasicPopupCell:function(){N({context:this,callback:{changeTotal:this.changeTotal,changePageSize:this.changePageSize,changeDelay:this.changeDelay,changeDirection:this.changeDirection,changeAutoCheckScroller:this.changeAutoCheckScroller}})},changePageSize:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{pageSize:t}),this.generateData()},changeTotal:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{total:t}),this.generateData()},changeDelay:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{delay:t}),this.generateData()},changeDirection:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{vertical:t}),this.generateData()},changeAutoCheckScroller:function(t){this.listLocal=(0,r.A)((0,r.A)({},this.listLocal),{},{autoCheckScroller:t}),this.list=[],this.generateData()},generateData:function(){this.loading=!0,this.onFetchData(!0)}}},Q=J,Y=(l(3612),(0,A.A)(Q,o,s,!1,null,"50d130ca",null,!1,i,q)),X=Y.exports},76288:function(t,e,l){"use strict";l.d(e,{x:function(){return a}});var i=l(82445),n=0;function a(t){var e="binded_".concat(n);function l(){var l=this;l[e]||(t.call(l,i.on,!0),l[e]=!0)}function a(){var l=this;l[e]&&(t.call(l,i.AU,!1),l[e]=!1)}return n+=1,{mounted:l,activated:l,deactivated:a,beforeDestroy:a}}},63673:function(t,e,l){"use strict";l.r(e);var i=l(10809),n=l.n(i),a=l(34114),o=l.n(a),s=o()(n());s.push([t.id,".demo-container[data-v-50d130ca]{flex:1;margin-top:6px;overflow:auto}.demo-wrap--hor .list__wrap[data-v-50d130ca]{display:flex;height:100%}.demo-wrap--hor .list__item[data-v-50d130ca]{min-width:100px;border-right:1px solid #f5f6fa;height:100%}.list__item[data-v-50d130ca]{width:100%;height:50px;display:flex;align-items:center;justify-content:center;border-bottom:1px solid #f5f6fa;background:#fff;font-size:16px;box-sizing:border-box}",""]),e["default"]=s},20722:function(t,e,l){"use strict";l.r(e);var i=l(10809),n=l.n(i),a=l(34114),o=l.n(a),s=o()(n());s.push([t.id,".press-list--hor[data-v-646ab1a6]  .press-list__layout{height:100%;display:flex}.press-list--hor .press-list__loading[data-v-646ab1a6],.press-list--hor .press-list__finished[data-v-646ab1a6]{min-width:100px;height:100%}.press-list__loading[data-v-646ab1a6],.press-list__finished[data-v-646ab1a6]{width:100%;height:50px;display:flex;align-items:center;justify-content:center;color:#969799;font-size:14px}.press-list__placeholder[data-v-646ab1a6]{height:0;pointer-events:none}",""]),e["default"]=s}}]);